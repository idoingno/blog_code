<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>作用域和闭包 | 如三秋兮</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/frontend-apprenticeship/logo.svg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <script language="javascript" type="text/javascript" src="/frontend-apprenticeship/js/pgmanor-self.js"></script>
    <meta name="description" content="独上高楼,望尽天涯路">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="preload" href="/frontend-apprenticeship/assets/css/0.styles.3b58bccc.css" as="style"><link rel="preload" href="/frontend-apprenticeship/assets/js/app.6bfb99ec.js" as="script"><link rel="preload" href="/frontend-apprenticeship/assets/js/3.a963b92e.js" as="script"><link rel="preload" href="/frontend-apprenticeship/assets/js/1.7ad3074d.js" as="script"><link rel="preload" href="/frontend-apprenticeship/assets/js/29.1ff43ba9.js" as="script"><link rel="preload" href="/frontend-apprenticeship/assets/js/12.4942a9b7.js" as="script"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/10.3d0abb49.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/11.866d1e2d.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/13.c030d36c.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/14.8b19e72f.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/15.76d72200.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/16.b24eb135.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/17.b15da7d1.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/18.0b426e3d.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/19.2c77163b.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/20.4036f6b8.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/21.afa42591.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/22.065d0d6b.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/23.a8ac9ed1.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/24.3ce183d9.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/25.2ae011c9.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/26.4e014cb2.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/27.1fcc01ae.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/28.a5130788.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/30.c573e8eb.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/31.62d64d52.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/32.8d7040ee.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/33.89a90ccb.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/34.880589ee.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/35.68547a61.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/36.ada31b49.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/37.684ad773.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/38.9baa7fa8.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/39.3e3826a7.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/4.618061b3.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/40.34bc2c9e.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/41.ba0f6954.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/5.43c8e185.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/6.28aecf46.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/7.b37dc245.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/8.ffad93e5.js"><link rel="prefetch" href="/frontend-apprenticeship/assets/js/9.3b3c12e3.js">
    <link rel="stylesheet" href="/frontend-apprenticeship/assets/css/0.styles.3b58bccc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-2b39fa29><div data-v-2b39fa29><div id="loader-wrapper" class="loading-wrapper" data-v-3c25d25c data-v-2b39fa29 data-v-2b39fa29><div class="loader-main" data-v-3c25d25c><div data-v-3c25d25c></div><div data-v-3c25d25c></div><div data-v-3c25d25c></div><div data-v-3c25d25c></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-779e71f5 data-v-2b39fa29 data-v-2b39fa29><h3 class="title" data-v-779e71f5 data-v-779e71f5>如三秋兮</h3> <p class="description" data-v-779e71f5 data-v-779e71f5>独上高楼,望尽天涯路</p> <label id="box" class="inputBox" data-v-779e71f5 data-v-779e71f5><input type="password" value="" data-v-779e71f5> <span data-v-779e71f5>Konck! Knock!</span> <button data-v-779e71f5>OK</button></label> <div class="footer" data-v-779e71f5 data-v-779e71f5><span data-v-779e71f5><i class="iconfont reco-theme" data-v-779e71f5></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-779e71f5>vuePress-theme-reco</a></span> <span data-v-779e71f5><i class="iconfont reco-copyright" data-v-779e71f5></i> <a data-v-779e71f5><!---->
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-2b39fa29><header class="navbar" data-v-2b39fa29><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend-apprenticeship/" class="home-link router-link-active"><!----> <span class="site-name">如三秋兮</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/frontend-apprenticeship/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend-apprenticeship/fontend/html/" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontend-apprenticeship/fontend/css/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend-apprenticeship/fontend/Js/" class="nav-link router-link-active"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend-apprenticeship/fontend/websitecol/" class="nav-link"><i class="undefined"></i>
  网址收藏
</a></li></ul></div></div><div class="nav-item"><a href="/frontend-apprenticeship/algorithm/" class="nav-link"><i class="undefined"></i>
  算法
</a></div><div class="nav-item"><a href="/frontend-apprenticeship/about/" class="nav-link"><i class="undefined"></i>
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>思维导图</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://zhimap.com/home" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  zhiMap
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.processon.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  processOn
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gitmind.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  gitmind
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>文档管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.yuque.com/dashboard" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  语雀
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://docs.qq.com/desktop" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  腾讯文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Q 的 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/idoingno" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-2b39fa29></div> <aside class="sidebar" data-v-2b39fa29><div class="personal-info-wrapper" data-v-6f004206 data-v-2b39fa29><!----> <!----> <div class="num" data-v-6f004206><div data-v-6f004206><h3 data-v-6f004206>26</h3> <h6 data-v-6f004206>文章</h6></div> <div data-v-6f004206><h3 data-v-6f004206>0</h3> <h6 data-v-6f004206>标签</h6></div></div> <ul class="social-links" data-v-6f004206></ul> <hr data-v-6f004206></div> <nav class="nav-links"><div class="nav-item"><a href="/frontend-apprenticeship/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend-apprenticeship/fontend/html/" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontend-apprenticeship/fontend/css/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend-apprenticeship/fontend/Js/" class="nav-link router-link-active"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend-apprenticeship/fontend/websitecol/" class="nav-link"><i class="undefined"></i>
  网址收藏
</a></li></ul></div></div><div class="nav-item"><a href="/frontend-apprenticeship/algorithm/" class="nav-link"><i class="undefined"></i>
  算法
</a></div><div class="nav-item"><a href="/frontend-apprenticeship/about/" class="nav-link"><i class="undefined"></i>
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>思维导图</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://zhimap.com/home" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  zhiMap
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.processon.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  processOn
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gitmind.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  gitmind
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>文档管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.yuque.com/dashboard" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  语雀
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://docs.qq.com/desktop" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  腾讯文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Q 的 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/idoingno" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-apprenticeship/fontend/Js/" aria-current="page" class="sidebar-link">写在前面</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JS 核心</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-apprenticeship/fontend/Js/js-core-1/" class="sidebar-link">数据类型（判断、转换）</a></li><li><a href="/frontend-apprenticeship/fontend/Js/js-core-2/" class="sidebar-link">This和对象委托</a></li><li><a href="/frontend-apprenticeship/fontend/Js/js-core-3/" aria-current="page" class="active sidebar-link">作用域和闭包</a></li><li><a href="/frontend-apprenticeship/fontend/Js/js-core-4/" class="sidebar-link">异步及性能</a></li><li><a href="/frontend-apprenticeship/fontend/Js/js-core-5/" class="sidebar-link">其它</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Dom</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-apprenticeship/fontend/Js/ConditionalTypes-a/" class="sidebar-link">条件类型</a></li><li><a href="/frontend-apprenticeship/fontend/Js/Generics-b/" class="sidebar-link">泛型</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-779e71f5 data-v-2b39fa29><h3 class="title" data-v-779e71f5 data-v-779e71f5>作用域和闭包</h3> <!----> <label id="box" class="inputBox" data-v-779e71f5 data-v-779e71f5><input type="password" value="" data-v-779e71f5> <span data-v-779e71f5>Konck! Knock!</span> <button data-v-779e71f5>OK</button></label> <div class="footer" data-v-779e71f5 data-v-779e71f5><span data-v-779e71f5><i class="iconfont reco-theme" data-v-779e71f5></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-779e71f5>vuePress-theme-reco</a></span> <span data-v-779e71f5><i class="iconfont reco-copyright" data-v-779e71f5></i> <a data-v-779e71f5><!---->
            
          <!---->
          2022
        </a></span></div></div> <div data-v-2b39fa29><main class="page"><section><div class="page-title"><h1 class="title">作用域和闭包</h1> <div data-v-ab138e42><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h2> <p>负责收集并维护由所有声明的标识符（变量）组成的一系列查询，并实施一套非常严格的规则，确定当前执行的代码对这些标识符的访问权限。</p> <ul><li>变量的赋值操作会执行两个动作，首先编译器会在当前作用域中声明一个变量（如果之前没有声明过），然后在运行时引擎会在作用域中查找该变量，如果能够找到就会对它赋值。</li> <li>遍历嵌套作用域链的规则很简单：引擎从当前的执行作用域开始查找变量，如果找不到，就向上一级继续查找。当抵达最外层的全局作用域时，无论找到还是没找到，查找过程都会停止。</li> <li>作用域是一套规则，用于确定在何处以及如何查找变量（标识符）。如果查找的目的是对变量进行赋值，那么就会使用 <code>LHS</code> 查询；如果目的是获取变量的值，就会使用 <code>RHS</code> 查询。</li> <li>不成功的 <code>RHS</code> 引用会导致抛出 <code>ReferenceError</code> 异常。不成功的 <code>LHS</code> 引用会导致自动隐式地创建一个全局变量（非严格模式下），该变量使用 <code>LHS</code> 引用的目标作为标识符，或者抛出 <code>ReferenceError</code> 异常（严格模式下）。</li></ul> <h3 id="编译原理"><a href="#编译原理" class="header-anchor">#</a> 编译原理</h3> <p>在传统编译语言的流程中，程序中的一段源代码在执行之前会经历三个步骤，统称为“<strong>编译</strong>”。</p> <ul><li>分词/词法分析（Tokenizing/Lexing）
<ul><li>这个过程会将由字符组成的字符串分解成（对编程语言来说）有意义的代码块，这些代码块被称为词法单元（<code>token</code>）。</li> <li>分词（<code>tokenizing</code>）和词法分析（<code>Lexing</code>）之间的区别是非常微妙、晦涩的，主要差异在于词法单元的识别是通过有状态还是无状态的方式进行的。简单来说，如果词法单元生成器在判断 <code>a</code> 是一个独立的词法单元还是其他词法单元的一部分时，调用的是有状态的解析规则，那么这个过程就被称为词法分析。</li></ul></li> <li>解析/语法分析（Parsing）
<ul><li>这个过程是将词法单元流（数组）转换成一个由元素逐级嵌套所组成的代表了程序语法结构的树。这个树被称为“抽象语法树”（<code>Abstract Syntax Tree，AST</code>）。</li></ul></li> <li>代码生成
<ul><li>将<code>AST</code>转换为可执行代码的过程被称为代码生成。这个过程与语言、目标平台等息息相关。</li></ul></li></ul> <h3 id="词法作用域"><a href="#词法作用域" class="header-anchor">#</a> 词法作用域</h3> <p>词法作用域就是定义在词法阶段的作用域。就是由你在写代码时将变量和块作用域写在哪里来决定的，因此当词法分析器处理代码时会保持作用域不变（大部分情况下是这样的）。</p> <p><img alt="" data-src="/frontend-apprenticeship/imgs/js/scope-1.png" loading="lazy" class="lazy"></p> <p>① 包含着整个全局作用域，其中只有一个标识符：<em>foo</em>。</p> <p>② 包含着 <em>foo</em> 所创建的作用域，其中有三个标识符：<em>a、bar 和 b</em>。</p> <p>③ 包含着 <em>bar</em> 所创建的作用域，其中只有一个标识符：<em>c</em>。</p> <h3 id="函数作用域"><a href="#函数作用域" class="header-anchor">#</a> 函数作用域</h3> <p>函数作用域的含义是指，属于这个函数的全部变量都可以在整个函数的范围内使用及复用（事实上在嵌套的作用域中也可以使用）。这种设计方案是非常有用的，
能充分利用 <code>JavaScript</code> 变量可以根据需要改变值类型的“<strong>动态</strong>”特性。</p> <ul><li>当程序中加载了多个第三方库时，如果它们没有妥善地将内部私有的函数或变量隐藏起来，就会很容易引发冲突。这些库通常会在全局作用域中声明一个名字足够独特的变量，通常是一个对象。这个对象被用作库的<strong>命名空间</strong>，所有需要暴露给外界的功能都会成为这个对象（命名空间）的属性，而不是将自己的标识符暴露在顶级的词法作用域中。</li> <li>另外一种避免冲突的办法和现代的模块机制很接近，就是从众多模块管理器中挑选一个来使用。使用这些工具，任何库都无需将标识符加入到全局作用域中，而是通过依赖管理器的机制将库的标识符显式地导入到另外一个特定的作用域中。</li></ul> <blockquote><p>匿名函数表达式，因为 <code>function()..</code>没有名称标识符。函数表达式可以是匿名的，而函数声明则不可以省略函数名——在 <code>JavaScript</code> 的语法中这是非法的。</p> <p><strong>IIFE</strong>，代表立即执行函数表达式（Immediately Invoked Function Expression）；函数没有名称，也不存储在变量中。 函数表达式末尾的两个括号（）会让它被立即执行或调用；函数名对 <strong>IIFE</strong> 当然不是必须的，<strong>IIFE</strong> 最常见的用法是使用一个匿名函数表达式。IIFE 的另一个非常普遍的进阶用法是把它们当作函数调用并传递参数进去。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Chirp!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="块作用域"><a href="#块作用域" class="header-anchor">#</a> 块作用域</h3> <p>块作用域指的是变量和函数不仅可以属于所处的作用域，也可以属于某个代码块（通常指<code>{..}</code>内部）。</p> <ul><li>try/catch 会创建一个块作用域，其中声明的变量仅在 <code>catch</code> 内部有效。</li> <li>let 关键字可以将变量绑定到所在的任意作用域中（通常是<code>{..}</code>内部）。</li> <li>const 关键字可以用来创建块作用域变量，但其值是固定的（常量）。</li></ul> <h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <p>当函数可以记住并访问所在的词法作用域时，就产生了闭包，即使函数是在当前词法作用域之外执行。</p> <p>在定时器、事件监听器、<code>Ajax</code> 请求、跨窗口通信、<code>Web Workers</code> 或者任何其他的异步（或者同步）任务中，只要使用了回调函数，实际上就是在使用闭包！</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// for循环头部的let声明还会有一个特殊的行为。这个行为指出变量在循环过程中不止被声明一次，每次迭代都会声明。随后的每个迭代都会使用上一个迭代结束时的值来初始化这个变量。</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>模块：模块有两个主要特征：</p> <p>（1）为创建内部作用域而调用了一个包装函数；</p> <p>（2）包装函数的返回值必须至少包括一个对内部函数的引用，这样就会创建涵盖整个包装函数内部作用域的闭包。</p> <p>最常见的实现模块模式的方法通常被称为模块暴露，一个立即调用函数表达式（IIFE）通常用于将相关功能分组到单个对象或者是 module 中。</p> <blockquote><p><strong>注意：</strong> 一个立即调用函数表达式（IIFE）返回了一个 <code>funModule</code> 对象。 返回的这个对象包含了作为对象属性的所有 <code>mixin</code> 行为。 <code>module</code> 模式的优点是，所有的运动相关的行为都可以打包成一个对象，然后由代码的其他部分使用。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> funModule <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function">isCuteMixin</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">.</span><span class="token function-variable function">isCute</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">singMixin</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Singing to an awesome tune&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

funModule<span class="token punctuation">.</span><span class="token function">singMixin</span><span class="token punctuation">(</span>abc<span class="token punctuation">)</span><span class="token punctuation">;</span>
abc<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2022/1/28 18:38:19</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/frontend-apprenticeship/fontend/Js/js-core-2/" class="prev">
            This和对象委托
          </a></span> <span class="next"><a href="/frontend-apprenticeship/fontend/Js/js-core-4/">
            异步及性能
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-bc609070><li class="level-2" data-v-bc609070><a href="/frontend-apprenticeship/fontend/Js/js-core-3/#作用域" class="sidebar-link reco-side-作用域" data-v-bc609070>作用域</a></li><li class="level-3" data-v-bc609070><a href="/frontend-apprenticeship/fontend/Js/js-core-3/#编译原理" class="sidebar-link reco-side-编译原理" data-v-bc609070>编译原理</a></li><li class="level-3" data-v-bc609070><a href="/frontend-apprenticeship/fontend/Js/js-core-3/#词法作用域" class="sidebar-link reco-side-词法作用域" data-v-bc609070>词法作用域</a></li><li class="level-3" data-v-bc609070><a href="/frontend-apprenticeship/fontend/Js/js-core-3/#函数作用域" class="sidebar-link reco-side-函数作用域" data-v-bc609070>函数作用域</a></li><li class="level-3" data-v-bc609070><a href="/frontend-apprenticeship/fontend/Js/js-core-3/#块作用域" class="sidebar-link reco-side-块作用域" data-v-bc609070>块作用域</a></li><li class="level-2" data-v-bc609070><a href="/frontend-apprenticeship/fontend/Js/js-core-3/#闭包" class="sidebar-link reco-side-闭包" data-v-bc609070>闭包</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-1bfb1bbb data-v-1bfb1bbb><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-1bfb1bbb><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-1bfb1bbb></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-1bfb1bbb></path></svg></div><!----></div></div>
    <script src="/frontend-apprenticeship/assets/js/app.6bfb99ec.js" defer></script><script src="/frontend-apprenticeship/assets/js/3.a963b92e.js" defer></script><script src="/frontend-apprenticeship/assets/js/1.7ad3074d.js" defer></script><script src="/frontend-apprenticeship/assets/js/29.1ff43ba9.js" defer></script><script src="/frontend-apprenticeship/assets/js/12.4942a9b7.js" defer></script>
  </body>
</html>
