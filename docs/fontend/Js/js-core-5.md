---
title: å…¶å®ƒ
autoGroup-1: JS æ ¸å¿ƒ
---

## ES6+

JavaScript æ ‡å‡†çš„å®˜æ–¹åç§°æ˜¯â€œECMAScriptâ€ï¼ˆç®€ç§°â€œESâ€ï¼‰ï¼Œç›´åˆ°æœ€è¿‘éƒ½æ˜¯ç”¨æœ‰åºæ•°å­—æ¥æ ‡è¯†ç‰ˆæœ¬çš„ï¼Œä¾‹å¦‚â€œ5â€è¡¨ç¤ºâ€œç¬¬ 5 ç‰ˆâ€ã€‚

ä¸‹ä¸€ä¸ª JavaScript ç‰ˆæœ¬ï¼ˆå‘å¸ƒæ—¥æœŸä» 2013 å¹´æ‹–åˆ° 2014 å¹´ï¼Œç„¶ååˆåˆ° 2015 å¹´ï¼‰æ ‡ç­¾ï¼Œä¹‹å‰çš„å…±è¯†æ˜¾ç„¶æ˜¯ ES6ã€‚ä½†æ˜¯ï¼Œåœ¨ ES6 è§„èŒƒå‘å±•åæœŸï¼Œå‡ºç°äº†è¿™æ ·çš„æ–¹æ¡ˆï¼šæœ‰äººå»ºè®®æœªæ¥çš„ç‰ˆæœ¬åº”è¯¥æ”¹æˆåŸºäºå¹´ä»½ï¼Œæ¯”å¦‚ ES2016ï¼ˆä¹Ÿå°±æ˜¯ ES7ï¼‰æ¥æ ‡ç¤ºåœ¨ 2016 å¹´ç»“æŸä¹‹å‰æ•²å®šçš„ä»»ä½•ç‰ˆæœ¬çš„è§„èŒƒã€‚å°½ç®¡æœ‰å¼‚è®®ï¼Œä½†æ¯”èµ·åæ¥æå‡ºçš„æ–¹æ¡ˆ ES2015ï¼Œå¾ˆå¯èƒ½ä¿æŒç»Ÿæ²»åœ°ä½çš„ç‰ˆæœ¬å‘½åä»æ˜¯ ES6ã€‚è€Œ ES2016 å¯èƒ½ä¼šé‡‡ç”¨æ–°çš„åŸºäºå¹´ä»½çš„å‘½åæ–¹æ¡ˆã€‚

### letã€const

- ES6 ä¸­å¼•å…¥äº†ä¸€ä¸ªåä¸º let çš„å…³é”®å­—ï¼Œè¿™æ˜¯å¯¹ JavaScript çš„ä¸€æ¬¡é‡å¤§æ›´æ–°ï¼Œä»¥è§£å†³ä¸ var å…³é”®å­—æœ‰å…³çš„æ½œåœ¨é—®é¢˜ã€‚åŒåçš„å˜é‡åªèƒ½å£°æ˜ä¸€æ¬¡ã€‚
- const å…³é”®å­—å£°æ˜åªè¯»å˜é‡ã€‚å§‹ç»ˆä½¿ç”¨ const å…³é”®å­—å‘½åä¸æƒ³é‡æ–°åˆ†é…çš„å˜é‡ã€‚
  > Tipsï¼šä½¿ç”¨ `const` åˆ†é…ç»™å˜é‡çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„å’Œå‡½æ•°ï¼‰ä»ç„¶æ˜¯å¯å˜çš„, ä½¿ç”¨ const å£°æ˜åªèƒ½é˜²æ­¢å˜é‡æ ‡è¯†ç¬¦çš„é‡æ–°åˆ†é…ã€‚è¿™ä¸ªå€¼å¹¶æ²¡æœ‰å› ä¸º `const` è¢«é”å®šæˆ–è€…ä¸å¯å˜ï¼Œåªæ˜¯èµ‹å€¼æœ¬èº«ä¸å¯å˜ã€‚

```js
{
  const a = [1, 2, 3];
  a.push(4);
  console.log(a); // [1,2,3,4]
  a = 42; // TypeError!
}
```

### spread/rest

`ES6` å¼•å…¥äº†ä¸€ä¸ªæ–°çš„è¿ç®—ç¬¦ `...`ï¼Œé€šå¸¸ç§°ä¸º `spread` æˆ– `rest`ï¼ˆ**å±•å¼€æˆ–æ”¶é›†**ï¼‰è¿ç®—ç¬¦ï¼Œå–å†³äºå®ƒåœ¨å“ª / å¦‚ä½•ä½¿ç”¨ã€‚

`spread` å±•å¼€æ“ä½œç¬¦ï¼Œå¯ä»¥å±•å¼€æ•°ç»„ä»¥åŠéœ€è¦å¤šä¸ªå‚æ•°æˆ–å…ƒç´ çš„è¡¨è¾¾å¼ã€‚

```js
var a = [2, 3, 4];
var b = [1, ...a, 5];
console.log(b); // [1,2,3,4,5]
```

> `...arr` è¿”å›ä¸€ä¸ªè§£å‹çš„æ•°ç»„ã€‚å±•å¼€æ“ä½œç¬¦åªèƒ½å¤Ÿåœ¨å‡½æ•°çš„å‚æ•°ä¸­æˆ–è€…æ•°ç»„ä¸­ä½¿ç”¨ã€‚

`rest` æ“ä½œç¬¦å¯ä»¥ç”¨äºåˆ›å»ºæœ‰ä¸€ä¸ªå˜é‡æ¥æ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°ã€‚ è¿™äº›å‚æ•°è¢«å‚¨å­˜åœ¨ä¸€ä¸ªå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨è¯»å–çš„æ•°ç»„ä¸­ã€‚

```js
// foo(..) å‡½æ•°å£°æ˜ä¸­çš„ ...args é€šå¸¸ç§°ä¸ºâ€œrest å‚æ•°â€ï¼Œå› ä¸ºè¿™é‡Œæ˜¯åœ¨æ”¶é›†å…¶ä½™çš„å‚æ•°ã€‚
const func = (...args) => {
  console.log(args.length);
};

foo(1, 2, 3, 4, 5); // [1,2,3,4,5]
```

### é»˜è®¤å‚æ•°å€¼

JavaScript æœ€å¸¸è§çš„ä¸€ä¸ªæŠ€å·§å°±æ˜¯å…³äºè®¾å®šå‡½æ•°å‚æ•°é»˜è®¤å€¼çš„ã€‚

```js
function foo(x = 11, y = 31) {
  console.log(x + y);
}
foo(); // 42
foo(5, 6); // 11
foo(0, 42); // 42
foo(5); // 36
foo(5, undefined); // 36 <-- ä¸¢äº†undefined
foo(5, null); // 5 <-- nullè¢«å¼ºåˆ¶è½¬æ¢ä¸º0
foo(undefined, 6); // 17 <-- ä¸¢äº†undefined
foo(null, 6); // 6 <-- nullè¢«å¼ºåˆ¶è½¬æ¢ä¸º0
```

### è§£æ„èµ‹å€¼

è§£æ„èµ‹å€¼æ˜¯ `ES6` å¼•å…¥çš„æ–°è¯­æ³•ï¼Œç”¨æ¥ä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¹¶ä¼˜é›…åœ°å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚

```js
const user = { name: "John Doe", age: 34 };
const { name, age } = user;
// è¿™é‡Œçš„è¯­æ³•æ¨¡å¼æ˜¯ souce: targetï¼ˆæˆ–è€…è¯´æ˜¯ value:variable-alias)ã€‚
const { name: userName, age: userAge } = user;

var x = 10,
  y = 20;
[y, x] = [x, y];
console.log(x, y); // 20 10

// åµŒå¥—è§£æ„
var a1 = [1, [2, 3, 4], 5];
var o1 = { x: { y: { z: 6 } } };
var [a, [b, c, d], e] = a1;
var {
  x: {
    y: { z: w },
  },
} = o1;
console.log(a, b, c, d, e); // 1 2 3 4 5
console.log(w); // 6
```

### è®¡ç®—å±æ€§å

ES6 å¯¹å¯¹è±¡å­—é¢å®šä¹‰æ–°å¢äº†ä¸€ä¸ªè¯­æ³•ï¼Œç”¨æ¥æ”¯æŒæŒ‡å®šä¸€ä¸ªè¦è®¡ç®—çš„è¡¨è¾¾å¼ï¼Œå…¶ç»“æœä½œä¸ºå±æ€§åã€‚

```js
// å¯¹è±¡å­—é¢å®šä¹‰å±æ€§åä½ç½®çš„ [ .. ] ä¸­å¯ä»¥æ”¾ç½®ä»»æ„åˆæ³•è¡¨è¾¾å¼ã€‚
var prefix = "user_";
var o = {
 baz: function(..){ .. },
 [ prefix + "foo" ]: function(..){ .. },
 [ prefix + "bar" ]: function(..){ .. }

};

// è®¡ç®—å±æ€§åæœ€å¸¸è§çš„ç”¨æ³•å¯èƒ½å°±æ˜¯å’Œ Symbols å…±åŒä½¿ç”¨
var o = {
 [Symbol.toStringTag]: "really cool thing",
};

// Symbol.toStringTag æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å†…ç½®å€¼ï¼Œç”¨ [ .. ] è¯­æ³•ä¸ºå…¶æ±‚å€¼ï¼Œæ‰€ä»¥å¯ä»¥æŠŠå€¼ "really cool thing" èµ‹ç»™è¿™ä¸ªç‰¹æ®Šçš„å±æ€§åã€‚

// è®¡ç®—å±æ€§åä¹Ÿå¯ä»¥ä½œä¸ºç®€æ´æ–¹æ³•æˆ–è€…ç®€æ´ç”Ÿæˆå™¨çš„åç§°å‡ºç°ï¼š
var o = {
 ["f" + "oo"]() { .. } // è®¡ç®—å‡ºçš„ç®€æ´æ–¹æ³•
 *["b" + "ar"]() { .. } // è®¡ç®—å‡ºçš„ç®€æ´ç”Ÿæˆå™¨
};
```

### æ¨¡æ¿å­—é¢é‡

ES6 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å­—é¢é‡ï¼Œä½¿ç”¨ **_`_** ä½œä¸ºç•Œå®šç¬¦ã€‚è¿™æ ·çš„å­—ç¬¦ä¸²å­—é¢å€¼æ”¯æŒåµŒå…¥åŸºæœ¬çš„å­—ç¬¦ä¸²æ’å…¥è¡¨è¾¾å¼ï¼Œä¼šè¢«è‡ªåŠ¨è§£æå’Œæ±‚å€¼ã€‚

```js
var name = "Kyle";
var greeting = `Hello ${name}!`;
console.log(greeting); // "Hello Kyle!"
console.log(typeof greeting); // "string"
```

### ç®­å¤´å‡½æ•°

ç®­å¤´å‡½æ•°å®šä¹‰åŒ…æ‹¬ä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼ˆé›¶ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œå¦‚æœå‚æ•°ä¸ªæ•°ä¸æ˜¯ä¸€ä¸ªçš„è¯è¦ç”¨ `( .. )`åŒ…å›´èµ·æ¥ï¼‰ï¼Œç„¶åæ˜¯æ ‡è¯† `=>`ï¼Œå‡½æ•°ä½“æ”¾åœ¨æœ€å

`=>` ç®­å¤´å‡½æ•°çš„ä¸»è¦è®¾è®¡ç›®çš„å°±æ˜¯ä»¥ç‰¹å®šçš„æ–¹å¼æ”¹å˜ `this` çš„è¡Œä¸ºç‰¹æ€§

```js
var f1 = () => 12;
var f2 = (x) => x * 2;
var f3 = (x, y) => {
  var z = x * 2 + y;
  y++;
  x *= 3;
  return (x + y + z) / 2;
};
```

> ç®­å¤´å‡½æ•°æ”¯æŒæ™®é€šå‡½æ•°å‚æ•°çš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬é»˜è®¤å€¼ã€è§£æ„ã€`rest` å‚æ•°ï¼Œç­‰ç­‰ã€‚

### for..of å¾ªç¯

`for..of` å¾ªç¯çš„å€¼å¿…é¡»æ˜¯ä¸€ä¸ª `iterable`ï¼Œæˆ–è€…è¯´å®ƒå¿…é¡»æ˜¯å¯ä»¥è½¬æ¢ / å°ç®±åˆ°ä¸€ä¸ª `iterable` å¯¹è±¡çš„å€¼ã€‚`iterable` å°±æ˜¯ä¸€ä¸ªèƒ½å¤Ÿäº§ç”Ÿè¿­ä»£å™¨ä¾›å¾ªç¯ä½¿ç”¨çš„å¯¹è±¡ã€‚

```js
// for..of å’Œ for..in å…¶ä¸­çš„åŒºåˆ«
var a = ["a", "b", "c", "d", "e"];

for (var idx in a) {
  // 0 1 2 3 4
  console.log(idx);
}

for (var val of a) {
  // "a" "b" "c" "d" "e"
  console.log(val);
}
```

åœ¨åº•å±‚ï¼Œ`for..of` å¾ªç¯å‘ `iterable` è¯·æ±‚ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç„¶ååå¤è°ƒç”¨è¿™ä¸ªè¿­ä»£å™¨æŠŠå®ƒäº§ç”Ÿçš„å€¼èµ‹ç»™å¾ªç¯è¿­ä»£å˜é‡ã€‚

`JavaScript` ä¸­é»˜è®¤ä¸ºï¼ˆæˆ–æä¾›ï¼‰`iterable` çš„æ ‡å‡†å†…å»ºå€¼åŒ…æ‹¬ï¼š

- Arrays
- Strings
- Generators
- Collections / TypedArrays

> é»˜è®¤æƒ…å†µä¸‹å¹³å‡¡å¯¹è±¡å¹¶ä¸é€‚ç”¨ `for..of` å¾ªç¯ã€‚å› ä¸ºå®ƒä»¬å¹¶æ²¡æœ‰é»˜è®¤çš„è¿­ä»£å™¨ï¼Œè¿™æ˜¯æœ‰æ„è®¾è®¡çš„ç‰¹æ€§ï¼Œè€Œä¸æ˜¯é”™è¯¯ã€‚

### æ­£åˆ™è¡¨è¾¾å¼

(1) **Unicode æ ‡è¯†**

ES6+ æ­£åˆ™è¡¨è¾¾å¼æ–°çš„ `u` æ ‡è¯†ï¼Œè¿™ä¸ªæ ‡è¯†ä¼šä¸ºè¡¨è¾¾å¼æ‰“å¼€ `Unicode` åŒ¹é…ã€‚

JavaScript å­—ç¬¦ä¸²é€šå¸¸è¢«è§£é‡Šæˆ 16 ä½å­—ç¬¦åºåˆ—ï¼Œè¿™äº›å­—ç¬¦å¯¹åº”åŸºæœ¬å¤šè¯­è¨€å¹³é¢ä¸­çš„å­—ç¬¦ã€‚ä½†è¿˜æœ‰å¾ˆå¤š UTF-16 å­—ç¬¦åœ¨è¿™ä¸ªèŒƒå›´ä¹‹å¤–ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²ä¸­è¿˜å¯èƒ½åŒ…å«è¿™äº›å¤šå­—èŠ‚å­—ç¬¦ã€‚

åœ¨ `ES6` ä¹‹å‰ï¼Œæ­£åˆ™è¡¨è¾¾å¼åªèƒ½åŸºäº `PMB` å­—ç¬¦åŒ¹é…ï¼Œè¿™æ„å‘³ç€é‚£äº›æ‰©å±•å­—ç¬¦ä¼šè¢«å½“ä½œä¸¤ä¸ªç‹¬ç«‹çš„å­—ç¬¦æ¥åŒ¹é…ã€‚é€šå¸¸è¿™ä¸æ˜¯ç†æƒ³çš„åšæ³•ã€‚æ‰€ä»¥ï¼Œåœ¨ `ES6` ä¸­ï¼Œ`u` æ ‡è¯†ç¬¦è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼ç”¨ `Unicodeï¼ˆUTF-16ï¼‰`å­—ç¬¦æ¥è§£é‡Šå¤„ç†å­—ç¬¦ä¸²ï¼ŒæŠŠè¿™æ ·çš„æ‰©å±•å­—ç¬¦å½“ä½œå•ä¸ªå®ä½“æ¥åŒ¹é…ã€‚ [ES2015 ä¸­çš„ Unicode æ­£åˆ™è¡¨è¾¾å¼](https://mathiasbynens.be/notes/es6-unicode-regex)

```js
//  éŸ³ä¹ç¬¦å· ï¼ˆé«˜éŸ³ç¬¦å·ï¼‰æ˜¯ Unicode ç ç‚¹ä¸º U+1D11Eï¼ˆ0x1D11Eï¼‰
/ğ„/.test("ğ„-clef"); // true

/^.-clef/.test("ğ„-clef"); // false
/^.-clef/u.test("ğ„-clef"); // true
```

(2) **å®šç‚¹æ ‡è¯†**

`ES6` æ­£åˆ™è¡¨è¾¾å¼ä¸­å¦å¤–ä¸€ä¸ªæ–°å¢çš„æ ‡ç­¾æ¨¡å¼æ˜¯ `y`ï¼Œé€šå¸¸ç§°ä¸ºâ€œ`å®šç‚¹ï¼ˆstickyï¼‰æ¨¡å¼`â€ã€‚å®šç‚¹ä¸»è¦æ˜¯æŒ‡åœ¨æ­£åˆ™è¡¨è¾¾å¼çš„èµ·ç‚¹æœ‰ä¸€ä¸ªè™šæ‹Ÿçš„é”šç‚¹ï¼Œåªä»æ­£åˆ™è¡¨è¾¾å¼çš„ `lastIndex` å±æ€§æŒ‡å®šçš„ä½ç½®å¼€å§‹åŒ¹é…ã€‚

- æ²¡æœ‰å®šç‚¹æ¨¡å¼çš„

```js
//
var re1 = /foo/,
  str = "++foo++";

re1.lastIndex; // 0
re1.test(str); // true
re1.lastIndex; // 0--æ²¡æœ‰æ›´æ–°

re1.lastIndex = 4;
re1.test(str); // true--è¢«å¿½ç•¥çš„lastIndex
re1.lastIndex; // 4--æ²¡æœ‰æ›´æ–°

// test(..) å¹¶ä¸å…³å¿ƒ lastIndex çš„å€¼ï¼Œæ€»æ˜¯ä»è¾“å…¥å­—ç¬¦ä¸²çš„èµ·å§‹å¤„å¼€å§‹æ‰§è¡ŒåŒ¹é…ã€‚
// æ¨¡å¼å¹¶æ²¡æœ‰èµ·å§‹é”šç‚¹ ^ï¼Œå¯¹ "foo" çš„æœç´¢ä»æ•´ä¸ªå­—ç¬¦ä¸²å‘å‰å¯»æ‰¾åŒ¹é…ã€‚
// test(..) ä¸æ›´æ–° lastIndexã€‚
```

- å®šç‚¹æ¨¡å¼æ­£åˆ™è¡¨è¾¾å¼

```js
var re2 = /foo/y, // <-- æ³¨æ„å®šç‚¹æ ‡è¯†y
  str = "++foo++";
re2.lastIndex; // 0
re2.test(str); // false--0å¤„æ²¡æœ‰æ‰¾åˆ°"foo"
re2.lastIndex; // 0

re2.lastIndex = 2;
re2.test(str); // true
re2.lastIndex; // 5--æ›´æ–°åˆ°å‰æ¬¡åŒ¹é…ä¹‹åä½ç½®
re2.test(str); // false
re2.lastIndex; // 0--å‰æ¬¡åŒ¹é…å¤±è´¥åé‡ç½®

// test(..) ä½¿ç”¨ lastIndex ä½œä¸º str ä¸­ç²¾ç¡®è€Œä¸”å”¯ä¸€çš„ä½ç½®å¯»æ‰¾åŒ¹é…ã€‚ä¸ä¼šå‘å‰ç§»åŠ¨å»å¯»æ‰¾åŒ¹é…â€”â€”è¦ä¹ˆåŒ¹é…ä½äº lastIndex ä½ç½®ä¸Šï¼Œè¦ä¹ˆå°±æ²¡æœ‰åŒ¹é…ã€‚
// å¦‚æœåŒ¹é…æˆåŠŸï¼Œtest(..) ä¼šæ›´æ–° lastIndex æŒ‡å‘ç´§è·ŸåŒ¹é…å†…å®¹ä¹‹åçš„é‚£ä¸ªå­—ç¬¦ã€‚å¦‚æœåŒ¹é…å¤±è´¥ï¼Œtest(..) ä¼šæŠŠ lastIndex é‡ç½®å› 0ã€‚
```

ä¸€èˆ¬çš„æ²¡æœ‰ç”¨ `^` é™åˆ¶è¾“å…¥èµ·å§‹ç‚¹åŒ¹é…çš„éå®šç‚¹æ¨¡å¼å¯ä»¥è‡ªç”±åœ°åœ¨è¾“å…¥å­—ç¬¦ä¸²ä¸­å‘å‰ç§»åŠ¨å¯»æ‰¾åŒ¹é…å†…å®¹ã€‚è€Œå®šç‚¹æ¨¡å¼åˆ™é™åˆ¶äº†æ¨¡å¼åªèƒ½ä» `lastIndex` å¼€å§‹åŒ¹é…ã€‚

(3) **æ­£åˆ™è¡¨è¾¾å¼ flags**

åœ¨ `ES6` ä¹‹å‰ï¼Œå¦‚æœæƒ³è¦é€šè¿‡æ£€æŸ¥ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡æ¥åˆ¤æ–­å®ƒåº”ç”¨äº†é‚£äº›æ ‡è¯†ï¼Œéœ€è¦æŠŠå®ƒä» `source` å±æ€§çš„å†…å®¹ä¸­è§£æå‡ºæ¥

```js
// ES6 ä¹‹å‰
var re = /foo/gi;
re.toString(); // "/foo/ig"
var flags = re.toString().match(/\/([gim]*)$/)[1];
flags; // "ig"

// ES6 ä¹‹å
var re = /foo/gi;
re.flags; // "gi"
```

### æ•°å­—å­—é¢é‡æ‰©å±•

æ–°çš„ ES6 æ•°å­—å­—é¢é‡å½¢å¼

```js
var dec = 42,
  oct = 0o52, // æˆ–è€…0O52 :(
  hex = 0x2a, // æˆ–è€…0X2a :/
  bin = 0b101010; // æˆ–è€…0B101010 :/

// å”¯ä¸€åˆæ³•çš„å°æ•°å½¢å¼æ˜¯åè¿›åˆ¶çš„ã€‚å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶å’ŒäºŒè¿›åˆ¶éƒ½æ˜¯æ•´æ•°å½¢å¼ã€‚
// è¿™äº›å½¢å¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºéƒ½å¯ä»¥å¼ºåˆ¶ç±»å‹è½¬æ¢ / å˜æ¢æˆç›¸åº”çš„æ•°å­—å€¼ï¼š

Number("42"); // 42
Number("0o52"); // 42
Number("0x2a"); // 42

// åå‘è½¬æ¢
var a = 42;
a.toString(); // "42"--ä¹Ÿå¯ä»¥ç”¨a.toString( 10 )
a.toString(8); // "52"
a.toString(16); // "2a"
a.toString(2); // "101010
```

### ç¬¦å·

`ES6` ä¸º `JavaScript` å¼•å…¥äº†ä¸€ä¸ªæ–°çš„åŸç”Ÿç±»å‹ï¼š`symbol`, å’Œå…¶ä»–åŸç”Ÿç±»å‹ä¸ä¸€æ ·ï¼Œ`symbol` æ²¡æœ‰å­—é¢é‡å½¢å¼ã€‚

```js
var sym = Symbol("some optional description");
typeof sym; // "symbol"

sym.toString(); // "Symbol(some optional description)"

// æ„é€ ä¸€ä¸ª symbol å€¼çš„è£…ç®±å°è£…å¯¹è±¡å½¢å¼
sym instanceof Symbol; // false
var symObj = Object(sym);
symObj instanceof Symbol; // true
symObj.valueOf() === sym; // true
```

- ä¸èƒ½ä¹Ÿä¸åº”è¯¥å¯¹ `Symbol(..)` ä½¿ç”¨ `new`ã€‚å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªæ„é€ å™¨ï¼Œä¹Ÿä¸ä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚
- ä¼ ç»™ `Symbol(..)` çš„å‚æ•°æ˜¯å¯é€‰çš„ã€‚å¦‚æœä¼ å…¥äº†çš„è¯ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªä¸ºè¿™ä¸ª `symbol` çš„ç”¨é€”ç»™å‡ºç”¨æˆ·å‹å¥½æè¿°çš„å­—ç¬¦ä¸²ã€‚
- `typeof` çš„è¾“å‡ºæ˜¯ä¸€ä¸ªæ–°çš„å€¼ `("symbol")`ï¼Œè¿™æ˜¯è¯†åˆ« `symbol` çš„é¦–é€‰æ–¹æ³•ã€‚

ç¬¦å·çš„ä¸»è¦æ„ä¹‰æ˜¯åˆ›å»ºä¸€ä¸ªç±» ( ä¼¼ ) å­—ç¬¦ä¸²çš„ä¸ä¼šä¸å…¶ä»–ä»»ä½•å€¼å†²çªçš„å€¼ã€‚

```js
// ä½¿ç”¨ä¸€ä¸ªç¬¦å·ä½œä¸ºäº‹ä»¶åçš„å¸¸é‡
const EVT_LOGIN = Symbol("event.login");

evthub.listen(EVT_LOGIN, function (data) {
  // ..
});

// è¿™é‡Œçš„å¥½å¤„æ˜¯ EVT_LOGIN æŒæœ‰ä¸€ä¸ªä¸å¯èƒ½ä¸å…¶ä»–å€¼ï¼ˆæœ‰æ„æˆ–æ— æ„ï¼‰é‡å¤çš„å€¼ï¼Œæ‰€ä»¥è¿™é‡Œåˆ†å‘æˆ–å¤„ç†çš„äº‹ä»¶ä¸ä¼šæœ‰ä»»ä½•æ··æ·†ã€‚
```

å¯ä»¥åœ¨å¯¹è±¡ä¸­ç›´æ¥ä½¿ç”¨ç¬¦å·ä½œä¸º**å±æ€§å / é”®å€¼**ï¼Œæ¯”å¦‚ç”¨ä½œä¸€ä¸ªç‰¹æ®Šçš„æƒ³è¦ä½œä¸ºéšè—æˆ–è€…å…ƒå±æ€§çš„å±æ€§ã€‚

```js
// å®ç°äº†å•ä¾‹ï¼ˆsingletonï¼‰æ¨¡å¼çš„æ¨¡å—ï¼Œå®ƒåªå…è®¸è‡ªå·±è¢«åˆ›å»ºä¸€æ¬¡
const INSTANCE = Symbol( "instance" );

function HappyFace() {
 if (HappyFace[INSTANCE]) return HappyFace[INSTANCE];
 function smile() { .. }
 return HappyFace[INSTANCE] = {
    smile: smile
 };
}

var me = HappyFace(), you = HappyFace();

me === you; // true

me.smile()

// è¿™é‡Œçš„ INSTANCE ç¬¦å·å€¼æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ã€å‡ ä¹éšè—çš„ã€ç±»ä¼¼å…ƒå±æ€§çš„å±æ€§ï¼Œé™æ€ä¿å­˜åœ¨ HappeyFace() å‡½æ•°å¯¹è±¡ä¸­ã€‚
```

- ç¬¦å·æ³¨å†Œ

ç¬¦å·æ³¨å†Œä¸ºè¿™äº›å€¼æä¾›äº†å…¨å±€å­˜å‚¨ï¼Œå¯ä»¥é€šè¿‡å…¨å±€ç¬¦å·æ³¨å†Œï¼ˆglobal symbol registryï¼‰åˆ›å»ºè¿™äº›ç¬¦å·å€¼ã€‚

```js
const EVT_LOGIN = Symbol.for( "event.login" );
console.log( EVT_LOGIN ); // Symbol(event.login)

function HappyFace() {
 const INSTANCE = Symbol.for( "instance" );
 if (HappyFace[INSTANCE]) return HappyFace[INSTANCE];
 // ..
 return HappyFace[INSTANCE] = { .. };
}
```

`Symbol.for(..)` åœ¨å…¨å±€ç¬¦å·æ³¨å†Œè¡¨ä¸­æœç´¢ï¼Œæ¥æŸ¥çœ‹æ˜¯å¦æœ‰æè¿°æ–‡å­—ç›¸åŒçš„ç¬¦å·å·²ç»å­˜åœ¨ï¼Œå¦‚æœæœ‰çš„è¯å°±è¿”å›å®ƒã€‚å¦‚æœæ²¡æœ‰çš„è¯ï¼Œä¼šæ–°å»ºä¸€ä¸ªå¹¶å°†å…¶è¿”å›ã€‚æ¢å¥è¯è¯´ï¼Œå…¨å±€æ³¨å†Œè¡¨æŠŠç¬¦å·å€¼æœ¬èº«æ ¹æ®å…¶æè¿°æ–‡å­—ä½œä¸ºå•ä¾‹å¤„ç†ã€‚

å¯ä»¥ä½¿ç”¨ `Symbol.keyFor(..)` æå–æ³¨å†Œç¬¦å·çš„æè¿°æ–‡æœ¬ï¼ˆé”®å€¼ï¼‰ï¼š

```js
var s = Symbol.for("something cool");
var desc = Symbol.keyFor(s);
console.log(desc); // "something cool"

// å†æ¬¡ä»æ³¨å†Œä¸­å–å¾—ç¬¦å·
var s2 = Symbol.for(desc);
s2 === s; // true
```

- ä½œä¸ºå¯¹è±¡å±æ€§çš„ç¬¦å·

å¦‚æœæŠŠç¬¦å·ç”¨ä½œå¯¹è±¡çš„**å±æ€§ / é”®å€¼**ï¼Œé‚£ä¹ˆå®ƒä¼šä»¥ä¸€ç§ç‰¹æ®Šçš„æ–¹å¼å­˜å‚¨ï¼Œä½¿å¾—è¿™ä¸ªå±æ€§ä¸å‡ºç°åœ¨å¯¹è¿™ä¸ªå¯¹è±¡çš„ä¸€èˆ¬å±æ€§æšä¸¾ä¸­

```js
var o = {
  foo: 42,
  [Symbol("bar")]: "hello world",
  baz: true,
};
Object.getOwnPropertyNames(o); // [ "foo","baz" ]

// è¦å–å¾—å¯¹è±¡çš„ç¬¦å·å±æ€§ï¼š
Object.getOwnPropertySymbols(o); // [ Symbol(bar) ]
```

## new æ¨¡æ‹Ÿå®ç°

`new` **è¿ç®—ç¬¦** åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡çš„å®ä¾‹ã€‚

`new` å…³é”®å­—ä¼šè¿›è¡Œå¦‚ä¸‹çš„æ“ä½œï¼š

- åˆ›å»ºä¸€ä¸ªç©ºçš„ç®€å• `JavaScript` å¯¹è±¡ï¼ˆå³`{}`ï¼‰ï¼›
- ä¸ºæ–°åˆ›å»ºçš„å¯¹è±¡ï¼ˆ{}ï¼‰æ·»åŠ å±æ€§ **proto**ï¼Œå°†è¯¥å±æ€§é“¾æ¥è‡³æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼›
- å°†æ–°åˆ›å»ºçš„å¯¹è±¡ï¼ˆ{}ï¼‰ä½œä¸º this çš„ä¸Šä¸‹æ–‡ ï¼›
- å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å› thisã€‚

```js
function Car() {}
var car1 = new Car();
var car2 = new Car();

console.log(car1.color); // undefined

Car.prototype.color = "original color";
console.log(car1.color); // original color

car1.color = "black";
console.log(car1.color); // black

console.log(car1.__proto__.color); //original color
console.log(car2.__proto__.color); //original color
console.log(car1.color); // black
console.log(car2.color); // original color
```

```js
function Car(name, color) {
  this.name = name;
  this.color = color;

  this.size = 99;
}

Car.prototype.strength = 60;

Car.prototype.drive = function () {
  console.log(this.name + " is Driving");
};

function Factory() {
  // æ–°å»ºäº†ä¸€ä¸ªå¯¹è±¡ obj
  var obj = {};
  // å–å‡ºarguments çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå°±æ˜¯è¦ä¼ å…¥çš„æ„é€ å‡½æ•°
  var Constructor = [].shift.call(arguments);
  // è®©obj çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°ï¼Œobj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§
  obj.__proto__ = Constructor.prototype;
  // æ”¹å˜æ„é€ å‡½æ•° this çš„æŒ‡å‘åˆ°æ–°å»ºçš„å¯¹è±¡ï¼Œobj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§
  var ret = Constructor.apply(obj, arguments);

  return typeof ret === "object" ? ret : obj;
}

var car = Factory(Car, "sun", "red");

console.log(car.name); // sun
console.log(car.size); // 99
console.log(car.strength); // 60

car.drive(); // sun is Driving
```

## è½¬ä¹‰å­—ç¬¦

```
ä»£ç  è¾“å‡º
\' å•å¼•å·
\" åŒå¼•å·
\\ åæ–œæ 
\n æ¢è¡Œç¬¦
\r å›è½¦ç¬¦
\t åˆ¶è¡¨ç¬¦
\b é€€æ ¼
\f æ¢é¡µç¬¦
```

## å…¨å±€ä½œç”¨åŸŸã€å±€éƒ¨ä½œç”¨åŸŸã€å‡½æ•°

- åœ¨ JavaScript ä¸­ï¼Œä½œç”¨åŸŸæ¶‰åŠåˆ°å˜é‡çš„ä½œç”¨èŒƒå›´ã€‚ åœ¨å‡½æ•°å¤–å®šä¹‰çš„å˜é‡å…·æœ‰`å…¨å±€`ä½œç”¨åŸŸã€‚ è¿™æ„å‘³ç€ï¼Œå…·æœ‰å…¨å±€ä½œç”¨åŸŸçš„å˜é‡å¯ä»¥åœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹è¢«è°ƒç”¨ã€‚
- æœªä½¿ç”¨ let æˆ– const å…³é”®å­—å£°æ˜çš„å˜é‡ä¼šåœ¨`global`èŒƒå›´å†…è‡ªåŠ¨åˆ›å»ºã€‚ å½“åœ¨ä»£ç å…¶ä»–åœ°æ–¹æ— æ„é—´å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œåˆšå¥½å˜é‡åä¸å…¨å±€å˜é‡ç›¸åŒï¼Œè¿™æ—¶ä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„åæœã€‚
- åœ¨ä¸€ä¸ªå‡½æ•°å†…å£°æ˜çš„å˜é‡ï¼Œä»¥åŠè¯¥å‡½æ•°çš„å‚æ•°éƒ½å…·æœ‰å±€éƒ¨ï¼ˆlocalï¼‰ä½œç”¨åŸŸã€‚

## hasOwnProperty æ–¹æ³•

å¯ä»¥ç”¨å¯¹è±¡çš„ `.hasOwnProperty(propname)`æ–¹æ³•æ¥æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æŒ‡å®šçš„å±æ€§ã€‚ `.hasOwnProperty()` æ‰¾åˆ°è¯¥å±æ€§æ—¶è¿”å› `true`ï¼Œæ‰¾ä¸åˆ°è¯¥å±æ€§æ—¶è¿”å› `false`ã€‚

## ç”ŸæˆèŒƒå›´å†…çš„éšæœºæ•´æ•°

```
Math.floor(Math.random() * (max - min + 1)) + min
```

## å†»ç»“å‡½æ•°

`Object.freeze` ä»»ä½•æ›´æ”¹å¯¹è±¡çš„å°è¯•éƒ½å°†è¢«æ‹’ç»

## class è¯­æ³•å®šä¹‰æ„é€ å‡½æ•°

ES6 æä¾›äº†ä¸€ä¸ªæ–°çš„åˆ›å»ºå¯¹è±¡çš„è¯­æ³•ï¼Œä½¿ç”¨å…³é”®å­— `class`ã€‚`class` åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒå¹¶ä¸åƒ `Java`ã€`Python` æˆ–è€… `Ruby` è¿™ä¸€ç±»çš„è¯­è¨€ä¸€æ ·ï¼Œä¸¥æ ¼å±¥è¡Œäº†é¢å‘å¯¹è±¡çš„å¼€å‘è§„èŒƒã€‚

- `class` å…³é”®å­—å£°æ˜äº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œé‡Œé¢æ·»åŠ äº†ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚ å½“ç”¨ `new` åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡æ—¶ï¼Œæ„é€ å‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚
- **æ³¨æ„ï¼š** é¦–å­—æ¯å¤§å†™é©¼å³°å‘½åæ³• UpperCamelCase æ˜¯ ES6 `class` å‘½åçš„æƒ¯ä¾‹ã€‚
- `constructor` æ–¹æ³•æ˜¯ä¸€ä¸ªç‰¹æ®Šæ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå’Œåˆå§‹åŒ– `class` åˆ›å»ºçš„å¯¹è±¡ã€‚

## getter å’Œ setter æ¥æ§åˆ¶å¯¹è±¡çš„è®¿é—®

ä»å¯¹è±¡ä¸­è·å¾—ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥ç»™å¯¹è±¡çš„å±æ€§èµ‹å€¼ã€‚è¿™äº›æ“ä½œé€šå¸¸è¢«ç§°ä¸º `getters` ä»¥åŠ `setters`ã€‚

- `Getter` å‡½æ•°çš„ä½œç”¨æ˜¯å¯ä»¥è®©å¯¹è±¡è¿”å›ä¸€ä¸ªç§æœ‰å˜é‡ï¼Œè€Œä¸éœ€è¦ç›´æ¥å»è®¿é—®ç§æœ‰å˜é‡ã€‚
- `Setter` å‡½æ•°çš„ä½œç”¨æ˜¯å¯ä»¥åŸºäºä¼ è¿›çš„å‚æ•°æ¥ä¿®æ”¹å¯¹è±¡ä¸­ç§æœ‰å˜é‡ã€‚ è¿™äº›ä¿®æ”¹å¯ä»¥æ˜¯è®¡ç®—ï¼Œæˆ–è€…æ˜¯ç›´æ¥æ›¿æ¢ä¹‹å‰çš„å€¼
- **æ³¨æ„ï¼š** é€šå¸¸ä¼šåœ¨ç§æœ‰å˜é‡å‰æ·»åŠ ä¸‹åˆ’çº¿ï¼ˆ\_ï¼‰ã€‚ ç„¶è€Œï¼Œè¿™ç§åšæ³•æœ¬èº«å¹¶ä¸æ˜¯å°†å˜é‡å˜æˆç§æœ‰çš„ã€‚

## æ­£åˆ™è¡¨è¾¾å¼ æƒ°æ€§åŒ¹é…

- ä½¿ç”¨åŠ å· + æŸ¥æ‰¾ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œä½¿ç”¨æ˜Ÿå· \* æŸ¥æ‰¾é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦
- è´ªå©ªï¼ˆ**greedy**ï¼‰åŒ¹é…ä¼šåŒ¹é…åˆ°ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ¨¡å¼çš„å­—ç¬¦ä¸²çš„æœ€é•¿å¯èƒ½éƒ¨åˆ†ï¼Œå¹¶å°†å…¶ä½œä¸ºåŒ¹é…é¡¹è¿”å›ã€‚
- æ‡’æƒ°ï¼ˆ**lazy**ï¼‰åŒ¹é…ï¼Œå®ƒä¼šåŒ¹é…åˆ°æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²çš„æœ€å°å¯èƒ½éƒ¨åˆ†ã€‚ ä½¿ç”¨ ? å­—ç¬¦æ¥å°†å…¶å˜æˆæ‡’æƒ°åŒ¹é…ã€‚

```js
const str = "titanic";
const Regex = /t[a-z]*i/; // è´ªå©ªï¼ˆgreedyï¼‰åŒ¹é…  è¿”å›["titani"]
const Regex = /t[a-z]*?i/; // æ‡’æƒ°ï¼ˆlazyï¼‰åŒ¹é…   è¿”å›["ti"]

// å¯ä»¥ä½¿ç”¨é—®å· ? æŒ‡å®šå¯èƒ½å­˜åœ¨çš„å…ƒç´ ã€‚
let american = "color";
let british = "colour";
let rainbowRegex = /colou?r/;
```

## æ­£å‘å…ˆè¡Œæ–­è¨€å’Œè´Ÿå‘å…ˆè¡Œæ–­è¨€

å…ˆè¡Œæ–­è¨€ ï¼ˆLookaheadsï¼‰æ˜¯å‘Šè¯‰ JavaScript åœ¨å­—ç¬¦ä¸²ä¸­å‘å‰æŸ¥æ‰¾çš„åŒ¹é…æ¨¡å¼ã€‚ å½“æƒ³è¦åœ¨åŒä¸€ä¸ªå­—ç¬¦ä¸²ä¸Šæœå¯»å¤šä¸ªåŒ¹é…æ¨¡å¼æ—¶ï¼Œè¿™å¯èƒ½éå¸¸æœ‰ç”¨ã€‚

æœ‰ä¸¤ç§å…ˆè¡Œæ–­è¨€ï¼šæ­£å‘å…ˆè¡Œæ–­è¨€ï¼ˆpositive lookaheadï¼‰å’Œè´Ÿå‘å…ˆè¡Œæ–­è¨€ï¼ˆnegative lookaheadï¼‰ã€‚

æ­£å‘å…ˆè¡Œæ–­è¨€ä¼šæŸ¥çœ‹å¹¶ç¡®ä¿æœç´¢åŒ¹é…æ¨¡å¼ä¸­çš„å…ƒç´ å­˜åœ¨ï¼Œä½†å®é™…ä¸Šå¹¶ä¸åŒ¹é…ã€‚ æ­£å‘å…ˆè¡Œæ–­è¨€çš„ç”¨æ³•æ˜¯ `(?=...)`ï¼Œå…¶ä¸­ ... å°±æ˜¯éœ€è¦å­˜åœ¨ä½†ä¸ä¼šè¢«åŒ¹é…çš„éƒ¨åˆ†ã€‚

å¦ä¸€æ–¹é¢ï¼Œè´Ÿå‘å…ˆè¡Œæ–­è¨€ä¼šæŸ¥çœ‹å¹¶ç¡®ä¿æœç´¢åŒ¹é…æ¨¡å¼ä¸­çš„å…ƒç´ ä¸å­˜åœ¨ã€‚ è´Ÿå‘å…ˆè¡Œæ–­è¨€çš„ç”¨æ³•æ˜¯ `(?!...)`ï¼Œå…¶ä¸­ ... æ˜¯å¸Œæœ›ä¸å­˜åœ¨çš„åŒ¹é…æ¨¡å¼ã€‚ å¦‚æœè´Ÿå‘å…ˆè¡Œæ–­è¨€éƒ¨åˆ†ä¸å­˜åœ¨ï¼Œå°†è¿”å›åŒ¹é…æ¨¡å¼çš„å…¶ä½™éƒ¨åˆ†ã€‚

```js
let password = "abc123";
// 3 åˆ° 6 ä¸ªå­—ç¬¦ä¸”è‡³å°‘åŒ…å«ä¸€ä¸ªæ•°å­—
let checkPass = /(?=\w{3,6})(?=\D*\d)/;

// å…ˆè¡Œæ–­è¨€ä»¥åŒ¹é…å¤§äº 5 ä¸ªå­—ç¬¦ä¸”æœ‰ä¸¤ä¸ªè¿ç»­æ•°å­—çš„å¯†ç 
let pwRegex = /(?=\w{6})(?=\w*\d{2})/;

// æ­£åˆ™å»é™¤å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾ç©ºç™½å­—ç¬¦
let Regex = /^\s+|\s+$/g;
```

## æœ€ä½³å®è·µ

- ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼ˆ_camelCase_ï¼‰æ¥ä¹¦å†™ä¸€ä¸ª Javascript å˜é‡ã€‚ åœ¨é©¼å³°å‘½åæ³•ï¼ˆ_camelCase_ï¼‰ä¸­ï¼Œå˜é‡åçš„ç¬¬ä¸€ä¸ªå•è¯çš„é¦–å†™å­—æ¯å°å†™ï¼Œåé¢çš„å•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ã€‚
- å‘½åå¸¸é‡çš„å¸¸è§åšæ³•æ˜¯å…¨éƒ¨ä½¿ç”¨å¤§å†™å­—æ¯ï¼Œå•è¯ä¹‹é—´ç”¨ä¸‹åˆ’çº¿åˆ†éš”ã€‚

## this å…³é”®å­—

this æŒ‡å‘çš„å°±æ˜¯ä¸è¿™ä¸ªæ–¹æ³•æœ‰å…³è”çš„ å¯¹è±¡

åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šäº† this çš„å€¼ï¼ˆè¿è¡Œæ—¶ç»‘å®šï¼‰ã€‚this ä¸èƒ½åœ¨æ‰§è¡ŒæœŸé—´è¢«èµ‹å€¼ï¼Œå¹¶ä¸”åœ¨æ¯æ¬¡å‡½æ•°è¢«è°ƒç”¨æ—¶ this çš„å€¼ä¹Ÿå¯èƒ½ä¼šä¸åŒã€‚ES5 å¼•å…¥äº† bind æ–¹æ³•æ¥è®¾ç½®å‡½æ•°çš„ this å€¼ï¼Œè€Œä¸ç”¨è€ƒè™‘å‡½æ•°å¦‚ä½•è¢«è°ƒç”¨çš„ã€‚ES2015 å¼•å…¥äº†ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°ä¸æä¾›è‡ªèº«çš„ this ç»‘å®šï¼ˆthis çš„å€¼å°†ä¿æŒä¸ºé—­åˆè¯æ³•ä¸Šä¸‹æ–‡çš„å€¼ï¼‰ã€‚

å‡¡æ˜¯é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºå‡ºçš„æ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡éƒ½å«åšè¿™ä¸ªæ„é€ å‡½æ•°çš„ `instance`ã€‚
JavaScript æä¾›äº†ä¸€ç§å¾ˆç®€ä¾¿çš„æ–¹æ³•æ¥éªŒè¯è¿™ä¸ªäº‹å®ï¼Œé‚£å°±æ˜¯é€šè¿‡ `instanceof` æ“ä½œç¬¦ã€‚ `instanceof` å…è®¸ä½ å°†å¯¹è±¡ä¸æ„é€ å‡½æ•°ä¹‹é—´è¿›è¡Œæ¯”è¾ƒï¼Œæ ¹æ®å¯¹è±¡æ˜¯å¦ç”±è¿™ä¸ªæ„é€ å‡½æ•°åˆ›å»ºçš„è¿”å› true æˆ–è€… falseã€‚

ä¸¤ç§å±æ€§: è‡ªèº«å±æ€§å’Œ `prototype` å±æ€§ã€‚ è‡ªèº«å±æ€§æ˜¯ç›´æ¥åœ¨å¯¹è±¡ä¸Šå®šä¹‰çš„ã€‚ è€ŒåŸå‹å±æ€§åœ¨ `prototype` ä¸Šå®šä¹‰ã€‚

åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ `constructor` å±æ€§, æ˜¯å¯¹åˆ›å»ºè¿™ä¸ªå®ä¾‹çš„æ„é€ å‡½æ•°çš„ä¸€ä¸ªå¼•ç”¨ã€‚ `constructor` å±æ€§çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥é€šè¿‡æ£€æŸ¥è¿™ä¸ªå±æ€§æ¥æ‰¾å‡ºå®ƒæ˜¯ä¸€ä¸ªä»€ä¹ˆå¯¹è±¡ã€‚

æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªæ–°å¯¹è±¡çš„åŸå‹æœ‰ä¸€ä¸ªé‡è¦çš„å‰¯ä½œç”¨ã€‚ å®ƒæ¸…é™¤äº† `constructor` å±æ€§ï¼éœ€è¦åœ¨åŸå‹å¯¹è±¡ä¸­å®šä¹‰ä¸€ä¸ª `constructor` å±æ€§ã€‚

JavaScript ä¸­æ‰€æœ‰çš„å¯¹è±¡ï¼ˆé™¤äº†å°‘æ•°ä¾‹å¤–ï¼‰éƒ½æœ‰è‡ªå·±çš„ `prototype`ã€‚è€Œä¸”ï¼Œå¯¹è±¡çš„ `prototype` æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚

Object æ˜¯ JavaScript ä¸­æ‰€æœ‰å¯¹è±¡çš„ `supertype`ï¼Œä¹Ÿå°±æ˜¯åŸå‹é“¾çš„æœ€é¡¶å±‚ã€‚ å› æ­¤ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥è®¿é—® `hasOwnProperty` æ–¹æ³•ã€‚

Object.create(obj) åˆ›å»ºäº†ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶æŒ‡å®šäº† obj ä½œä¸ºæ–°å¯¹è±¡çš„ prototypeã€‚

å½“ä¸€ä¸ªå¯¹è±¡ä»å¦ä¸€ä¸ªå¯¹è±¡é‚£é‡Œç»§æ‰¿äº†å…¶ prototype æ—¶ï¼Œé‚£å®ƒä¹Ÿç»§æ‰¿äº†çˆ¶ç±»çš„ constructor å±æ€§ã€‚

## ä½¿ç”¨ Mixin åœ¨ä¸ç›¸å…³å¯¹è±¡ä¹‹é—´æ·»åŠ å…±åŒè¡Œä¸º

## ä½¿ç”¨é—­åŒ…ä¿æŠ¤å¯¹è±¡å†…çš„å±æ€§ä¸è¢«å¤–éƒ¨ä¿®æ”¹

- ä½¿å±æ€§ç§æœ‰åŒ–æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­åˆ›å»ºå˜é‡ã€‚ å¯ä»¥å°†è¯¥å˜é‡èŒƒå›´é™å®šåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œè€Œä¸æ˜¯å…¨å±€å¯ç”¨ã€‚ è¿™æ ·ï¼Œå±æ€§åªèƒ½ç”±æ„é€ å‡½æ•°ä¸­çš„æ–¹æ³•è®¿é—®å’Œæ›´æ”¹ã€‚

```js
function Bird() {
  let age = 10;

  this.getAge = function () {
    return age;
  };
}
```

## å‡½æ•°å¼ç¼–ç¨‹

å‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸€ç§æ–¹æ¡ˆç®€å•ã€åŠŸèƒ½ç‹¬ç«‹ã€å¯¹ä½œç”¨åŸŸå¤–æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨çš„ç¼–ç¨‹èŒƒå¼ï¼šINPUT -> PROCESS -> OUTPUTã€‚

å‡½æ•°å¼ç¼–ç¨‹ï¼š

1ï¼‰åŠŸèƒ½ç‹¬ç«‹â€”â€”ä¸ä¾èµ–äºç¨‹åºçš„çŠ¶æ€ï¼ˆæ¯”å¦‚å¯èƒ½å‘ç”Ÿå˜åŒ–çš„å…¨å±€å˜é‡ï¼‰ï¼›

2ï¼‰çº¯å‡½æ•°â€”â€”åŒä¸€ä¸ªè¾“å…¥æ°¸è¿œèƒ½å¾—åˆ°åŒä¸€ä¸ªè¾“å‡ºï¼›

3ï¼‰æœ‰é™çš„å‰¯ä½œç”¨â€”â€”å¯ä»¥ä¸¥æ ¼åœ°é™åˆ¶å‡½æ•°å¤–éƒ¨å¯¹çŠ¶æ€çš„æ›´æ”¹ã€‚

## å‡½æ•°å¼ç¼–ç¨‹æœ¯è¯­

- å‡½æ•°å°±åƒå…¶ä»–æ­£å¸¸å€¼ä¸€æ ·ï¼Œå¯ä»¥èµ‹å€¼ç»™å˜é‡ã€ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–ä»å…¶å®ƒå‡½æ•°è¿”å›ï¼Œè¿™ç§å‡½æ•°å«åšå¤´ç­‰ _first class_ å‡½æ•°ã€‚ åœ¨ `JavaScript` ä¸­ï¼Œæ‰€æœ‰å‡½æ•°éƒ½æ˜¯å¤´ç­‰å‡½æ•°ã€‚
- å°†å‡½æ•°ä¸ºå‚æ•°æˆ–è¿”å›å€¼çš„å‡½æ•°å«åšé«˜é˜¶ ( _higher order_) å‡½æ•°ã€‚
- å½“å‡½æ•°è¢«ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°æˆ–ä»å¦ä¸€ä¸ªå‡½æ•°è¿”å›æ—¶ï¼Œé‚£äº›ä¼ å…¥æˆ–è¿”å›çš„å‡½æ•°å¯ä»¥å«åš _lambda_ã€‚

## åŸå‹ä¸Šå®ç° map æ–¹æ³•

`map` æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå®ƒçš„è¾“å‡ºä»…å–å†³äºè¾“å…¥çš„æ•°ç»„å’Œä½œä¸ºå‚æ•°ä¼ å…¥çš„å›è°ƒå‡½æ•°ã€‚ æ­¤å¤–ï¼Œå®ƒæ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå®ƒçš„å‚æ•°ã€‚

```js
// ä½¿ç”¨å‚æ•°è§£æ„ï¼Œæ ‡é¢˜å’Œè¯„çº§è¢«æå–å¹¶è¿”å›åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚éœ€è¦æ‹¬å·æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚
List.map(({ Title: title, imdbName: name }) => ({ title, name }));
```

```js
// å…¨å±€å˜é‡
const s = [23, 65, 98, 5];
// åˆ©ç”¨ for
Array.prototype.myMap = function (callback) {
  const newArray = [];
  for (let i = 0; i < this.length; i++) {
    newArray.push(callback(this[i]));
  }
  return newArray;
};

// åˆ©ç”¨foreach
Array.prototype.myMap = function (callback) {
  var newArray = [];
  // Add your code below this lineF
  this.forEach((a) => newArray.push(callback(a)));
  // Add your code above this line
  return newArray;
};

const new_s = s.myMap(function (item) {
  return item * 2;
});
```

## åŸå‹ä¸Šå®ç° filter æ–¹æ³•

```js
let s = [23, 65, 98, 5];

Array.prototype.myFilter = function (callback) {
  var newArray = [];
  for (let i = 0; i < this.length; i++) {
    if (callback(this[i]) === true) {
      newArray.push(this[i]);
    }
  }
  return newArray;
};

var new_s = s.myFilter(function (item) {
  return item % 2 === 1;
});
```

## ~ è¿ç®—ç¬¦

`~` è¿ç®—ç¬¦å³å­—ä½æ“ä½œâ€œéâ€ï¼Œä½œä¸ºå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚ `~x` å¤§è‡´ç­‰äº`-(x+1)`

```js
~42; // -(42+1) ===> -43
```

åœ¨`-(x+1)` ä¸­å”¯ä¸€èƒ½å¤Ÿå¾—åˆ° 0ï¼ˆæˆ–è€…ä¸¥æ ¼è¯´æ˜¯-0ï¼‰çš„`x`å€¼æ˜¯-1ã€‚-1 æ˜¯ä¸€ä¸ªâ€œå“¨ä½å€¼â€ï¼Œ èµ‹äºˆç‰¹æ®Šå«ä¹‰ã€‚
**JavaScript** ä¸­å­—ç¬¦ä¸²çš„`indexOf(..)`æ–¹æ³•ä¹Ÿéµå®ˆè¿™ä¸€æƒ¯ä¾‹ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­æœç´¢æŒ‡å®šçš„å­å­—ç¬¦ä¸²ï¼Œå¦‚æœæ‰¾åˆ°å°±è¿”å›å­å­—ç¬¦ä¸²æ‰€åœ¨çš„ä½ç½®ï¼ˆä» 0 å¼€å§‹ï¼‰ï¼Œå¦åˆ™è¿”å›`-1`

```js
var a = "Hello World";
// true
if (a.indexOf("lo") > 0) {
  // æ‰¾åˆ°åŒ¹é…
}

// true
if (a.indexOf("lo") != -1) {
  // æ‰¾åˆ°åŒ¹é…
}

~a.indexOf("lo"); // -4  <=== çœŸå€¼
~a.indexOf("ol"); // 0  <=== å‡å€¼

// å¦‚æœè¿”å›-1 ~å°†å…¶è½¬åŒ–ä¸ºå‡å€¼0.å…¶ä»–åŒºæƒ…å†µä¸€å¾‹è½¬ä¸ºçœŸå€¼
```

## + è¿ç®—ç¬¦

`+` è¿ç®—ç¬¦ä¼šå°†æ“ä½œæ•°æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬åŒ–ä¸ºæ•°å­—ã€‚ä¹Ÿå¯ä»¥æ˜¾å¼å°†æ—¥æœŸè½¬åŒ–ä¸ºæ•°å­—ã€‚

```js
var a = "3.14";
console.log(+a);

var d = new Date();
console.log(+d);
```

## !! è¿ç®—ç¬¦

`!!` è¿ç®—ç¬¦æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬åŒ–ä¸ºå¸ƒå°”å€¼ã€‚

```js
var a = "0";
var b = [];
var c = {};
var d = "";
var e = 0;
var f = null;
var g;

!!a; // true
!!b; // true
!!c; // true

!!d; // false
!!e; // false
!!f; // false
!!g; // false
```

## || è¿ç®—ç¬¦ å’Œ && è¿ç®—ç¬¦

å®ƒä»¬çš„è¿”å›å€¼æ˜¯ä¸¤ä¸ªæ“ä½œæ•°ä¸­çš„ä¸€ä¸ªï¼ˆä¸”ä»…ä¸€ä¸ªï¼‰ã€‚å³é€‰æ‹©ä¸¤ä¸ªæ“ä½œæ•°ä¸­çš„ä¸€ä¸ªï¼Œç„¶åè¿”å›å®ƒçš„å€¼ã€‚

```js
var a = 42;
var b = "abc";
var c = null;

a || b; // 42
a && b; // "abc"

c || b; // "abc"
c && b; // null
```

## æŸ¯é‡ŒåŒ–

æŸ¯é‡ŒåŒ–å°±æ˜¯å°†æ¥æ”¶å¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬æ¢æˆæ¥æ”¶ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ã€‚å°†ä¸€ä¸ªå‡½æ•°ä»å¯è°ƒç”¨çš„ f(a, b, c) è½¬æ¢ä¸ºå¯è°ƒç”¨çš„ f(a)(b)(c)ã€‚

```js
function discount(discount) {
  return (price) => {
    return price * discount;
  };
}
const tenPercentDiscount = discount(0.1);
tenPercentDiscount(500);
```

ç”¨äºå¤šå‚æ•°å‡½æ•°çš„â€œé«˜çº§â€æŸ¯é‡ŒåŒ–å®ç°

```js
function curry(func) {
  return function curried(...args) {
    if (args.length >= func.length) {
      return func.apply(this, args);
    } else {
      return function (...args2) {
        return curried.apply(this, args.concat(args2));
      };
    }
  };
}

function sum(a, b, c) {
  return a + b + c;
}

let curriedSum = curry(sum);

console.log(curriedSum(1, 2, 3)); // 6ï¼Œä»ç„¶å¯ä»¥è¢«æ­£å¸¸è°ƒç”¨
console.log(curriedSum(1)(2, 3)); // 6ï¼Œå¯¹ç¬¬ä¸€ä¸ªå‚æ•°çš„æŸ¯é‡ŒåŒ–
console.log(curriedSum(1)(2)(3)); // 6ï¼Œå…¨æŸ¯é‡ŒåŒ–
```
